(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74f54c42"],{1503:function(e,t,i){"use strict";var n={typeSuccess:"success",typeError:"error",NEW:"新建",PASS:"审核通过",FAIL:"审核失败",CREATESUCCESS:"创建成功",DELETESUCCESS:"删除成功",DELETEFAILED:"删除失败",CREATEFAILED:"创建失败",FENPEISUCCESS:"创建成功",FENPEIFAILED:"创建失败",STATUSNEW:1,typeRoomAssignment:2,typeRentRoom:2,typeRoom:1};t["a"]=n},"1de1":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-form",[i("sui-form-fields",[i("sui-form-field",[i("label",[e._v("选择")]),i("sui-dropdown",{attrs:{placeholder:"选择房屋",selection:"",options:e.options},model:{value:e.singleContract.room_id,callback:function(t){e.$set(e.singleContract,"room_id",t)},expression:"singleContract.room_id"}})],1),i("sui-form-field",[i("label",[e._v("起始")]),i("datepicker",{attrs:{value:e.singleContract.starttime,language:e.lang["zh"]},model:{value:e.singleContract.starttime,callback:function(t){e.$set(e.singleContract,"starttime",t)},expression:"singleContract.starttime"}})],1),i("sui-form-field",[i("label",[e._v("结束时间")]),i("datepicker",{attrs:{value:e.singleContract.endtime,language:e.lang["zh"]},model:{value:e.singleContract.endtime,callback:function(t){e.$set(e.singleContract,"endtime",t)},expression:"singleContract.endtime"}})],1),i("sui-form-field",[i("label",[e._v("出租单位")]),i("sui-input",{attrs:{placeholder:"出租单位",disabled:e.disabled},model:{value:e.singleContract.rentunit,callback:function(t){e.$set(e.singleContract,"rentunit",t)},expression:"singleContract.rentunit"}})],1)],1),i("sui-form-fields",[i("sui-form-field",[i("label",[e._v("手机号")]),i("sui-input",{attrs:{placeholder:"手机号",disabled:e.disabled},model:{value:e.singleContract.mobile,callback:function(t){e.$set(e.singleContract,"mobile",t)},expression:"singleContract.mobile"}})],1),i("sui-form-field",[i("label",[e._v("负责人")]),i("sui-input",{attrs:{placeholder:"负责人",disabled:e.disabled},model:{value:e.singleContract.owner,callback:function(t){e.$set(e.singleContract,"owner",t)},expression:"singleContract.owner"}})],1),i("sui-form-field",[i("label",[e._v("金额")]),i("sui-input",{attrs:{placeholder:"金额",disabled:e.disabled},model:{value:e.singleContract.amt,callback:function(t){e.$set(e.singleContract,"amt",t)},expression:"singleContract.amt"}})],1)],1)],1)],1)},a=[],o=(i("d81d"),i("fa33")),l=i("ee9b"),s=i("0094"),r={name:"rentroom-contract",components:{Datepicker:o["a"]},data:function(){return{lang:l,disabled:!1,type:"Room",options:[],singleContract:{open:!1,title:"createForm",room_id:null,amt:0,owner:"",rentunit:"",starttime:"",endtime:""}}},methods:{updateData:function(){var e=this;"Room"==this.type?(console.log(this.type),Object(s["y"])().then((function(t){t.data.data.map((function(t){e.options.push({text:t.roomname,value:t.room_id})}))}))):Object(s["x"])().then((function(t){e.options=[],t.data.data.map((function(t){e.options.push({text:t.roomname,value:t.room_id})}))}))}},mounted:function(){var e=this;"Room"==this.type?(console.log(this.type),Object(s["y"])().then((function(t){console.log(t.data.data),t.data.data.map((function(t){e.options.push({text:t.roomname,value:t.room_id})}))}))):Object(s["x"])().then((function(t){console.log(t.data.data),t.data.data.map((function(t){e.options.push({text:t.roomname,value:t.room_id})}))}))},created:function(){}},c=r,u=i("2877"),d=Object(u["a"])(c,n,a,!1,null,null,null);t["a"]=d.exports},"6b02":function(e,t,i){"use strict";var n=i("7134"),a=i.n(n);a.a},7134:function(e,t,i){},"8e17":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("2b0e");function a(e,t,i){n["default"].notify({group:"foo",title:e,text:t,type:i})}},"8e27":function(e,t,i){},cc5e:function(e,t,i){"use strict";var n=i("8e27"),a=i.n(n);a.a},f80c:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("wl-container",[i("div",[i("div",[i("sui-dimmer",{attrs:{active:e.loading,inverted:""}},[i("sui-loader",{attrs:{content:"Loading..."}})],1)],1),i("div",{staticClass:"filterBiaoDan"},[i("sui-grid",[i("sui-grid-row",[i("sui-grid-column",{attrs:{width:13}},[i("sui-form",[i("sui-form-fields",{attrs:{inline:""}},[i("label",[e._v(" 产证面积")]),i("sui-form-field",[i("sui-input",{attrs:{type:"text",placeholder:"请选择"},model:{value:e.filterString.hezhunyongtu,callback:function(t){e.$set(e.filterString,"hezhunyongtu",t)},expression:"filterString.hezhunyongtu"}})],1),i("label",[e._v(" 至")]),i("sui-form-field",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.filterString.shijiyongtu,expression:"filterString.shijiyongtu"}],attrs:{type:"text",placeholder:"请选择"},domProps:{value:e.filterString.shijiyongtu},on:{input:function(t){t.target.composing||e.$set(e.filterString,"shijiyongtu",t.target.value)}}})]),i("sui-button",{attrs:{positive:"",content:"搜索"},on:{click:e.submit}})],1)],1)],1),i("sui-grid-column",{attrs:{width:3}},[i("div",[i("sui-button",{attrs:{content:"创建房屋",icon:"add green"},nativeOn:{click:function(t){return e.createRoomModel(t)}}}),i("sui-button",{attrs:{content:"导出",icon:"file green"},on:{click:e.exportToExcel}})],1)])],1)],1)],1),i("div",{staticClass:"vue2Table"},[i("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:e.localData,fields:e.fields,"sort-order":e.sortOrder,"data-path":"data","pagination-path":""},on:{"vuetable:pagination-data":e.onPaginationData},scopedSlots:e._u([{key:"action",fn:function(t){return i("div",{},[i("sui-button",{attrs:{positive:"",content:"修改"},on:{click:function(i){return e.viewSomeThing(t.rowData)}}}),i("sui-button",{attrs:{negative:"",content:"删除"},on:{click:function(i){return e.deleteRoom(t.rowData)}}})],1)}}])}),i("div",{staticClass:"pagination ui basic segment grid"},[i("vuetable-pagination-info",{ref:"paginationInfo"}),i("vuetable-pagination",{ref:"pagination",on:{"vuetable-pagination:change-page":e.onChangePage}})],1)],1),i("dialog-bar",{attrs:{type:"danger",title:"是否要删除",content:e.deleteTarget.text,dangerText:"确认删除"},on:{cancel:function(t){return e.clickCancel()},danger:function(t){return e.clickConfirmDelete()},confirm:function(t){return e.clickConfirmDelete()}},model:{value:e.sendVal,callback:function(t){e.sendVal=t},expression:"sendVal"}}),i("div",[i("sui-modal",{staticClass:"modal2",model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[i("sui-modal-content",{attrs:{scrolling:""}},[i("div",[i("sui-tab",{attrs:{menu:{text:!0},"active-index":e.defaultTab},on:{"update:activeIndex":function(t){e.defaultTab=t},"update:active-index":function(t){e.defaultTab=t}}},[i("sui-tab-pane",{attrs:{title:"基本信息",attached:!1}},[i("div",[i("rentroom-form",{attrs:{singleRoom:e.selectedRoom}})],1)]),i("sui-tab-pane",{attrs:{title:"合同信息",attached:!1,disabled:!e.editMode}},[i("div",[i("contract-form",{attrs:{singleEntry:e.selectedRoomContract}}),i("sui-button",{attrs:{content:"创建新合同"},on:{click:function(t){return e.createRentContract()}}})],1)]),i("sui-tab-pane",{key:e.componentFenpeikey,attrs:{title:"分配单位",attached:!1,disabled:!e.editMode}},[i("sui-dimmer",{attrs:{active:e.loading,inverted:""}},[i("sui-loader",{attrs:{content:"Loading..."}})],1),i("sui-form",[i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",{attrs:{required:"",error:e.validationCheck.unit_id}},[i("label",[e._v("单位 ")]),i("sui-dropdown",{attrs:{placeholder:"选择单位",selection:"",options:e.unitoptions},model:{value:e.selectedRoom.unit_id,callback:function(t){e.$set(e.selectedRoom,"unit_id",t)},expression:"selectedRoom.unit_id"}})],1),i("sui-form-field",{attrs:{required:"",error:e.validationCheck.space}},[i("label",[e._v("面积")]),i("sui-input",{attrs:{type:"text",placeholder:"输入面积"},model:{value:e.selectedRoom.space_assign,callback:function(t){e.$set(e.selectedRoom,"space_assign",t)},expression:"selectedRoom.space_assign"}})],1),i("sui-button",{attrs:{negative:"",content:"添加单位"},on:{click:function(t){return t.preventDefault(),e.assignRentRoom()}}})],1)],1),i("div",{staticClass:"vue2Table"},[i("vuetable",{key:e.componentAssignListkey,ref:"vuetable",attrs:{"api-mode":!1,data:e.selectedRoom.assignList,fields:e.fieldsAssign,"data-path":"data"},scopedSlots:e._u([{key:"action",fn:function(t){return i("div",{},[i("sui-button",{attrs:{negative:"",content:"删除"},on:{click:function(i){return e.deleteRoomAssign(t.rowData)}}})],1)}}])})],1)],1),i("sui-tab-pane",{attrs:{title:"地图定位",attached:!1,disabled:!e.editMode}},[i("div",{key:e.ComponentKey,staticClass:"imageForm"},[i("sui-form",[i("sui-form-fields",{attrs:{inline:""}},[i("label",[e._v(" 经度 ")]),i("sui-form-field",[i("sui-input",{attrs:{type:"text",placeholder:"请选择"},model:{value:e.selectedRoom.lon,callback:function(t){e.$set(e.selectedRoom,"lon",t)},expression:"selectedRoom.lon"}})],1),i("label",[e._v(" 维度")]),i("sui-form-field",[i("sui-input",{attrs:{type:"text",placeholder:"请选择"},model:{value:e.selectedRoom.lat,callback:function(t){e.$set(e.selectedRoom,"lat",t)},expression:"selectedRoom.lat"}})],1),i("sui-form-field",[i("label",[e._v("地址")]),i("sui-input",{attrs:{type:"text",placeholder:"输入地址"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1)],1)],1),i("baidu-map",{staticClass:"map",attrs:{center:e.point,zoom:15}},[i("bm-navigation",{attrs:{anchor:"BMAP_ANCHOR_TOP_RIGHT"}}),i("bm-marker",{attrs:{position:e.point,dragging:!0,animation:"BMAP_ANIMATION_BOUNCE"},on:{dragend:e.dragend}}),i("bm-local-search",{attrs:{keyword:e.keyword,"auto-viewport":!0,location:"上海"}})],1)],1)],1)],1)]),i("sui-modal-actions",[i("sui-button",{attrs:{negative:""},nativeOn:{click:function(t){return e.closeModal(t)}}},[e._v(" 取消 ")]),i("sui-button",{attrs:{positive:""},nativeOn:{click:function(t){return e.toggle(t)}}},[e._v(" 提交 ")])],1)],1)],1)],1)])},a=[],o=(i("d81d"),i("b0c0"),i("5f53")),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-form",[i("sui-form-fields",[i("sui-form-field",[i("label",[e._v("房屋名字")]),i("sui-input",{attrs:{placeholder:"房屋名字"},model:{value:e.singleRoom.roomname,callback:function(t){e.$set(e.singleRoom,"roomname",t)},expression:"singleRoom.roomname"}})],1),i("sui-form-field",[i("label",[e._v("所属区域")]),i("sui-input",{attrs:{placeholder:"所属区域",disabled:""},model:{value:e.singleRoom.area,callback:function(t){e.$set(e.singleRoom,"area",t)},expression:"singleRoom.area"}})],1)],1),i("sui-form-fields",[i("sui-form-field",[i("label",[e._v("房屋地址")]),i("sui-input",{staticClass:"width600",attrs:{placeholder:"房屋地址"},model:{value:e.singleRoom.address,callback:function(t){e.$set(e.singleRoom,"address",t)},expression:"singleRoom.address"}})],1)],1),i("sui-form-fields",[i("sui-form-field",[i("label",[e._v("房屋用途")]),i("sui-dropdown",{attrs:{placeholder:"房屋用途",selection:"",options:e.yongtuOptions},model:{value:e.singleRoom.usage,callback:function(t){e.$set(e.singleRoom,"usage",t)},expression:"singleRoom.usage"}})],1),i("sui-form-field",[i("label",[e._v("建筑面积")]),i("sui-input",{attrs:{placeholder:"建筑面积"},model:{value:e.singleRoom.space,callback:function(t){e.$set(e.singleRoom,"space",t)},expression:"singleRoom.space"}})],1)],1)],1)],1)},s=[],r={name:"rentroom-form",props:["singleRoom"],data:function(){return{yongtuOptions:[{text:"办公用房",value:"1"},{text:"服务用房",value:"2"},{text:"设备用房",value:"3"},{text:"附属用房",value:"4"}],jianzhuoptions:[{text:"低层住宅",value:"低层住宅"},{text:"多层住宅",value:"多层住宅"},{text:"中高层住宅",value:"中高层住宅"},{text:"高层住宅",value:"高层住宅"},{text:"其他形式住宅",value:"、其他形式住宅"}],jiegouoptions:[{text:"砖混结构",value:"砖混结构"},{text:"钢筋混凝土结构",value:"钢筋混凝土结构"},{text:"框架结构",value:"框架结构"},{text:"框剪结构",value:"框剪结构"},{text:"钢结构",value:"钢结构"},{text:"核心筒结构",value:"核心筒结构"}]}},methods:{createRoom:function(){console.log(this.singleRoom.roomid)}}},c=r,u=(i("6b02"),i("2877")),d=Object(u["a"])(c,l,s,!1,null,null,null),m=d.exports,p=i("c3d0"),f=i("3568"),g=i("127e"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isHeader?i("th",{staticClass:"vuetable-th-component-switch",domProps:{innerHTML:e._s(e.title)}}):i("td",{staticClass:"vuetable-td-component-switch"},[i("div",{staticClass:"ui toggle checkbox"},[i("input",{attrs:{type:"checkbox"},domProps:{checked:e.checkValue(e.rowData,e.rowField)},on:{change:function(t){return e.toggleSwitch(e.rowData,t)}}}),e.rowField.switch.label?i("label",[e._v(e._s(e.label(e.rowData,e.rowField)))]):e._e()])])},v=[],b=i("1157"),y=i.n(b),E=i("da61"),_={name:"vuetable-field-switch",mixins:[E["a"]],methods:{toggleSwitch:function(e,t){console.log(y.a),console.log("toggleSwitch: ",t.target.checked)},label:function(e,t){return"function"===typeof t.switch.label?t.switch.label(e):t.switch.label},checkValue:function(e,t){return"function"===typeof t.switch.field?t.switch.field(e):e[t.switch.field]}}},k=_,x=Object(u["a"])(k,h,v,!1,null,null,null),R=(x.exports,[{name:"roomname",title:"房屋名称",width:"15%"},{name:"address",title:"房屋地址",width:"15%"},{name:"space",title:"房屋面积",width:"15%"},{name:"created_on",title:"创建时间",width:"15%"},{name:"action",title:"操作",titleClass:"center aligned",dataClass:"center aligned",width:"30%"}]),C=[{name:"unit_detail.name",title:"单位名称",width:"15%"},{name:"unit_detail.level",title:"级别",width:"15%"},{name:"assigned_space",title:"面积",width:"15%"},{name:"created_on",title:"创建时间",width:"15%"},{name:"action",title:"操作",titleClass:"center aligned",dataClass:"center aligned",width:"30%"}],w=(i("1de1"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("sui-form",[i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("sui-checkbox",{attrs:{label:"按总面积",radio:"",value:"1"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),i("sui-form-field",[i("sui-checkbox",{attrs:{label:"按具体面积",radio:"",value:"2"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("出租方:")]),i("sui-input",{attrs:{placeholder:"出租方"},model:{value:e.singleEntry.rentowner,callback:function(t){e.$set(e.singleEntry,"rentowner",t)},expression:"singleEntry.rentowner"}})],1),i("sui-form-field",[i("label",[e._v("出租方地址:")]),i("sui-input",{attrs:{placeholder:"出租方地址"},model:{value:e.singleEntry.rentaddress,callback:function(t){e.$set(e.singleEntry,"rentaddress",t)},expression:"singleEntry.rentaddress"}})],1),i("sui-form-field",[i("label",[e._v("出租方联系人:")]),i("sui-input",{attrs:{placeholder:"出租方联系人"},model:{value:e.singleEntry.rentcontact,callback:function(t){e.$set(e.singleEntry,"rentcontact",t)},expression:"singleEntry.rentcontact"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("出租方联系人电话:")]),i("sui-input",{attrs:{placeholder:"出租方联系人电话"},model:{value:e.singleEntry.rentmobile,callback:function(t){e.$set(e.singleEntry,"rentmobile",t)},expression:"singleEntry.rentmobile"}})],1),i("sui-form-field",[i("label",[e._v("出租方联系人职务:")]),i("sui-input",{attrs:{placeholder:"出租方联系人职务"},model:{value:e.singleEntry.title,callback:function(t){e.$set(e.singleEntry,"title",t)},expression:"singleEntry.title"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("签约金额:")]),i("sui-input",{attrs:{placeholder:"签约金额",type:"number"},model:{value:e.singleEntry.rent_amt,callback:function(t){e.$set(e.singleEntry,"rent_amt",t)},expression:"singleEntry.rent_amt"}})],1),i("sui-form-field",[i("label",[e._v("增长规则:")]),i("sui-input",{attrs:{placeholder:"增长规则"},model:{value:e.singleEntry.rule,callback:function(t){e.$set(e.singleEntry,"rule",t)},expression:"singleEntry.rule"}})],1)],1),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.value,expression:"value==2"}]},[i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("办公面积:")]),i("sui-input",{attrs:{placeholder:"办公面积",type:"number",required:""},model:{value:e.singleEntry.space1,callback:function(t){e.$set(e.singleEntry,"space1",t)},expression:"singleEntry.space1"}})],1),i("sui-form-field",[i("label",[e._v("单价:")]),i("sui-input",{attrs:{placeholder:"办公面积单价",type:"number"},model:{value:e.singleEntry.price1,callback:function(t){e.$set(e.singleEntry,"price1",t)},expression:"singleEntry.price1"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("仓库面积:")]),i("sui-input",{attrs:{placeholder:"仓库面积",type:"number"},model:{value:e.singleEntry.space2,callback:function(t){e.$set(e.singleEntry,"space2",t)},expression:"singleEntry.space2"}})],1),i("sui-form-field",[i("label",[e._v("单价:")]),i("sui-input",{attrs:{placeholder:"仓库面积单价",type:"number"},model:{value:e.singleEntry.price2,callback:function(t){e.$set(e.singleEntry,"price2",t)},expression:"singleEntry.price2"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("场地面积:")]),i("sui-input",{attrs:{placeholder:"场地面积",type:"number"},model:{value:e.singleEntry.space3,callback:function(t){e.$set(e.singleEntry,"space3",t)},expression:"singleEntry.space3"}})],1),i("sui-form-field",[i("label",[e._v("单价:")]),i("sui-input",{attrs:{placeholder:"场地面积单价",type:"number"},model:{value:e.singleEntry.price3,callback:function(t){e.$set(e.singleEntry,"price3",t)},expression:"singleEntry.price3"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("其他面积:")]),i("sui-input",{attrs:{placeholder:"其他面积",type:"number"},model:{value:e.singleEntry.space4,callback:function(t){e.$set(e.singleEntry,"space4",t)},expression:"singleEntry.space4"}})],1),i("sui-form-field",[i("label",[e._v("单价:")]),i("sui-input",{attrs:{placeholder:"其他面积单价",type:"number"},model:{value:e.singleEntry.price4,callback:function(t){e.$set(e.singleEntry,"price4",t)},expression:"singleEntry.price4"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("车位个数")]),i("sui-input",{attrs:{placeholder:"车位个数",type:"number"},model:{value:e.singleEntry.carslot,callback:function(t){e.$set(e.singleEntry,"carslot",t)},expression:"singleEntry.carslot"}})],1),i("sui-form-field",[i("label",[e._v("单价")]),i("sui-input",{attrs:{placeholder:"单价",type:"number"},model:{value:e.singleEntry.price5,callback:function(t){e.$set(e.singleEntry,"price5",t)},expression:"singleEntry.price5"}})],1)],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("起始时间:")]),i("datepicker",{attrs:{value:e.singleEntry.starttime,language:e.lang["zh"]},model:{value:e.singleEntry.starttime,callback:function(t){e.$set(e.singleEntry,"starttime",t)},expression:"singleEntry.starttime"}})],1),i("sui-form-field",[i("label",[e._v("结束时间:")]),i("datepicker",{attrs:{value:e.singleEntry.endtime,language:e.lang["zh"]},model:{value:e.singleEntry.endtime,callback:function(t){e.$set(e.singleEntry,"endtime",t)},expression:"singleEntry.endtime"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("label",[e._v("是否包含物业费:")]),i("sui-form-field",[i("sui-checkbox",{attrs:{label:"是",radio:"",value:"1"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),i("sui-form-field",[i("sui-checkbox",{attrs:{label:"否",radio:"",value:"2"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)],1),i("sui-form-fields",{attrs:{inline:""}},[i("sui-form-field",[i("label",[e._v("总面积")]),i("sui-input",{attrs:{placeholder:"总面积"},model:{value:e.total,callback:function(t){e.total=t},expression:"total"}})],1),i("sui-form-field",[i("label",[e._v("总价")]),i("sui-input",{attrs:{placeholder:"总价"},model:{value:e.totalPrice,callback:function(t){e.totalPrice=t},expression:"totalPrice"}})],1),i("sui-button",{attrs:{animated:"vertical"},on:{click:function(t){return t.preventDefault(),e.calculateTotal(t)}}},[i("sui-button-content",{attrs:{hidden:""}},[e._v("刷新")]),i("sui-button-content",{attrs:{visible:""}},[i("sui-icon",{attrs:{name:"refresh"}})],1)],1)],1)],1)],1)}),$=[],O=i("fa33"),S=i("ee9b"),T=i("0094"),D={name:"weixiu-form",components:{Datepicker:O["a"]},props:["singleEntry"],data:function(){return{options:[],louOptions:[],floorOptions:[],floorLoading:!1,louLoading:!1,lang:S,disabled:!1,total:0,value:"1",totalPrice:0}},methods:{calculateTotal:function(){this.total=this.checkValue(this.singleEntry.space1)+this.checkValue(this.singleEntry.space2)+this.checkValue(this.singleEntry.space4)+this.checkValue(this.singleEntry.carslot),this.totalPrice=this.checkValue(this.singleEntry.price1)*this.checkValue(this.singleEntry.space1)+this.checkValue(this.singleEntry.price2)*this.checkValue(this.singleEntry.space2)+this.checkValue(this.singleEntry.price3)*this.checkValue(this.singleEntry.space3)+this.checkValue(this.singleEntry.price4)*this.checkValue(this.singleEntry.space4)+this.checkValue(this.singleEntry.price5)*this.checkValue(this.singleEntry.carslot),console.log(this.$props)},checkValue:function(e){return e?parseFloat(e):0},setFloor:function(){var e=this;console.log(this.singleEntry.building_id),this.floorOptions=[],this.floorLoading=!0,null!=this.singleEntry.building_id&&Object(T["s"])(this.singleEntry).then((function(t){var i=t.data.data;i.map((function(t){e.floorOptions.push({text:t.name,value:t.id})})),e.floorLoading=!1})),this.louLoading=!1},setFang:function(){var e=this;console.log(this.singleEntry.room_id),this.louOptions=[],this.louLoading=!0,null!=this.singleEntry.room_id&&Object(T["t"])(this.singleEntry).then((function(t){t.data.data.map((function(t){e.louOptions.push({text:t.name,value:t.id})})),e.louLoading=!1}))}},mounted:function(){var e=this;null!=this.singleEntry.space2?this.value="2":this.value="1",this.total=0,this.totalPrice=0,Object(T["y"])().then((function(t){t.data.data.map((function(t){e.options.push({text:t.roomname,value:t.id})}))}))}},j=D,A=Object(u["a"])(j,w,$,!1,null,null,null),L=A.exports,F=i("0b2f"),P=i("1503"),V=i("8e17"),I={name:"MyVuetable",components:{"dialog-bar":o["a"],Vuetable:p["a"],VuetablePagination:f["a"],VuetablePaginationInfo:g["a"],"rentroom-form":m,"contract-form":L},data:function(){return{validationCheck:{unit_id:!1,space:!1},sendVal:!1,modelTitle:"",editMode:!1,open:!1,filterString:{jiadi:"",diji:""},unitoptions:[],componentAssignListkey:1,componentFenpeikey:1,defaultTab:0,point:{},selectedRoom:{},selectedRoomContract:{},deleteTarget:"",loading:!0,localData:[],fields:R,fieldsAssign:C,sortOrder:[{field:"email",direction:"asc"}],contractForm:{open:!1,model:"create",title:"createForm",room_id:"",amt:0,owner:"",rentunit:"",starttime:"",endtime:""},keyword:""}},methods:{assignRentRoom:function(){var e=this;if(this.loading=!0,console.log(this.selectedRoom.unit_id),void 0==this.selectedRoom.unit_id||""==this.selectedRoom.unit_id)return this.validationCheck.unit_id=!0,void(this.validationCheck.space=!0);this.validationCheck.unit_id=!1,this.validationCheck.space=!1;var t={room_id:this.selectedRoom.id,space:this.selectedRoom.space_assign,unit_id:this.selectedRoom.unit_id};Object(T["a"])(t).then((function(t){e.loading=!1,0==t.data.code?(Object(V["a"])(P["a"].FENPEISUCCESS,P["a"].FENPEISUCCESS,P["a"].typeSuccess),e.loading=!0,e.refreshAssignment()):Object(V["a"])(P["a"].CREATEFAILED,P["a"].CREATEFAILED,P["a"].typeError)})).catch((function(e){this.loading=!1,Object(V["a"])(P["a"].CREATEFAILED,P["a"].CREATEFAILED,P["a"].typeError)}))},refreshAssignment:function(){var e=this;Object(T["C"])({room_id:this.selectedRoom.id}).then((function(t){e.loading=!1,e.selectedRoom.assignList=t.data.data,e.componentAssignListkey++}))},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){if("timestamp"!==e)return t[e]}))}))},clickConfirmDelete:function(){var e=this;this.loading=!0,this.deleteTarget.type==P["a"].typeRoomAssignment?Object(T["p"])(this.deleteTarget).then((function(t){e.loading=!1,0==t.data.code?(Object(V["a"])(P["a"].DELETESUCCESS,P["a"].DELETESUCCESS,P["a"].typeSuccess),e.refreshAssignment()):Object(V["a"])(P["a"].DELETEFAILED,P["a"].DELETEFAILED,P["a"].typeError)})):Object(T["o"])(this.deleteTarget).then((function(t){e.refreshRooms(),console.log(t)}))},openContractModal:function(e){this.contractForm.open=!0,this.contractForm.room_id=e.room_id,this.$refs.formComponentContract.singleContract=this.contractForm},dragend:function(e){void 0==e?(this.selectedRoom.lon=this.point.lng,this.selectedRoom.lat=this.point.lat):(this.selectedRoom.lon=e.point.lng,this.selectedRoom.lat=e.point.lat)},createRentContract:function(){var e=this;this.selectedRoomContract.room_id=this.selectedRoom.id;var t=this;Object(T["g"])(this.selectedRoomContract).then((function(i){e.selectedRoomContract={},0==i.data.code?t.$notify({group:"foo",title:"创建合同成功",text:"创建合同成功",type:"success"}):t.$notify({group:"foo",title:"创建合同失败",text:"创建合同失败",type:"error"})})).catch((function(e){t.$notify({group:"foo",title:"创建合同失败",text:"创建合同失败",type:"error"})}))},viewSomeThing:function(e){var t=this;this.loading=!0,this.defaultTab=0,this.selectedRoom=e,this.modelTitle="修改租赁房屋",this.editMode=!0,null===e.lat||""==e.lat?this.point={lng:121.547967,lat:30.879141}:this.point={lng:e.lon,lat:e.lat},this.open=!0,Object(T["C"])({room_id:this.selectedRoom.id}).then((function(e){t.selectedRoom.assignList=e.data.data,Object(T["w"])({room_id:t.selectedRoom.id}).then((function(e){console.log(e.data.data);var i=e.data.data.length;t.selectedRoomContract=0==i?{}:e.data.data[i-1],t.loading=!1}))}))},exportToExcel:function(){var e=["id","room_id","cert_id","owner","address","roomname","usage","space"],t=this.formatJson(e,this.localData.data);Object(F["a"])({header:e,data:t,filename:"excel-list",autoWidth:!0,bookType:"xlsx"})},deleteRoomAssign:function(e){this.sendVal=!0,this.deleteTarget={text:"是否要删除"+e.room_id+"("+e.unit_detail.name+")?",id:e.id,type:P["a"].typeRoomAssignment}},deleteRoom:function(e){},refreshRooms:function(){var e=this;Object(T["x"])().then((function(t){console.log(t),e.loading=!1,e.localData={total:16,per_page:5,current_page:1,last_page:4,next_page_url:"data.data.data?page=2",prev_page_url:null,from:1,to:5,data:t.data.data}}))},createRoomModel:function(){this.modelTitle="创建租赁房屋",this.editMode=!1,this.open=!0,this.selectedRoom={area:"奉贤区"}},toggle:function(){var e=this;this.open=!this.open,this.loading=!0,console.log(this.editMode),this.editMode?this.editMode&&Object(T["F"])(this.selectedRoom).then((function(t){console.log(t),e.refreshRooms(),e.loading=!1})):Object(T["h"])(this.selectedRoom).then((function(t){console.log(t),e.refreshRooms(),e.loading=!1}))},openRoom:function(e){console.log(e)},submit:function(){console.log(this.filterString)},onPaginationData:function(e){this.$refs.pagination.setPaginationData(e),this.$refs.paginationInfo.setPaginationData(e)},onChangePage:function(e){this.$refs.vuetable.changePage(e)},closeModal:function(){this.open=!1,this.contractForm.open=!1}},created:function(){var e=this;Object(T["x"])().then((function(t){e.loading=!1,e.localData={total:16,per_page:5,current_page:1,last_page:4,next_page_url:"data.data.data?page=2",prev_page_url:null,from:1,to:5,data:t.data.data}})),Object(T["z"])().then((function(t){for(var i=t.data.data,n=i.length-1;n>=0;n--)e.unitoptions.push({text:i[n]["name"],value:i[n]["id"]})}))}},M=I,N=(i("cc5e"),Object(u["a"])(M,n,a,!1,null,null,null));t["default"]=N.exports}}]);
//# sourceMappingURL=chunk-74f54c42.1217551e.js.map