(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-597b01d7"],{"0205":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("wl-container",[n("div",[n("div",[n("sui-dimmer",{attrs:{active:e.loading,inverted:""}},[n("sui-loader",{attrs:{content:"Loading..."}})],1)],1),n("div",{staticClass:"filterBiaoDan"},[n("sui-button",{attrs:{content:"添加",icon:"add green"},nativeOn:{click:function(t){return e.createRoomModel(t)}}}),n("sui-button",{attrs:{content:"导出",icon:"file green"},on:{click:e.exportToExcel}})],1),n("div",{staticClass:"vue2Table"},[n("vuetable",{ref:"vuetable",attrs:{"api-mode":!1,data:e.localData,fields:e.fields,"sort-order":e.sortOrder,"data-path":"data","pagination-path":""},on:{"vuetable:pagination-data":e.onPaginationData},scopedSlots:e._u([{key:"action",fn:function(t){return n("div",{},[n("sui-button",{attrs:{positive:"",content:"查看"},on:{click:function(n){return e.viewSomeThing(t.rowData,"check")}}}),n("sui-button",{attrs:{content:"修改"},on:{click:function(n){return e.viewSomeThing(t.rowData,"modify")}}}),n("sui-button",{attrs:{content:"删除"},on:{click:function(n){return e.deleteRoom(t.rowData)}}})],1)}}])}),n("div",{staticClass:"pagination ui basic segment grid"},[n("vuetable-pagination-info",{ref:"paginationInfo"}),n("vuetable-pagination",{ref:"pagination",on:{"vuetable-pagination:change-page":e.onChangePage}})],1)],1),n("dialog-bar",{attrs:{type:"danger",title:"是否要删除",content:e.deleteTarget.text,dangerText:"确认删除"},on:{cancel:function(t){return e.clickCancel()},danger:function(t){return e.clickConfirmDelete()},confirm:function(t){return e.clickConfirmDelete()}},model:{value:e.sendVal,callback:function(t){e.sendVal=t},expression:"sendVal"}}),n("dialog-bar",{attrs:{type:"danger",title:e.tokenMessage.text,content:e.tokenMessage.content,dangerText:e.tokenMessage.dangerText},model:{value:e.tokenMessage.tokenExpired,callback:function(t){e.$set(e.tokenMessage,"tokenExpired",t)},expression:"tokenMessage.tokenExpired"}}),n("div",[n("sui-modal",{staticClass:"modal2",model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("sui-modal-header",[e._v(e._s(e.modelTitle))]),n("sui-modal-content",{attrs:{image:""}},[n("employee-form",{ref:"formComponent"})],1),n("sui-modal-actions",[n("sui-button",{attrs:{negative:""},nativeOn:{click:function(t){return e.closeModal(t)}}},[e._v(" 取消 ")]),"check"!==e.modalMode?n("sui-button",{attrs:{positive:""},nativeOn:{click:function(t){return e.toggle(t)}}},[e._v(" 提交 ")]):e._e()],1)],1)],1)],1)])},o=[],i=(n("d81d"),n("b0c0"),n("5f53")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("sui-form",[n("sui-form-fields",[n("sui-form-field",[n("label",[e._v("名称")]),n("sui-input",{attrs:{placeholder:"名称",disabled:e.disabled},model:{value:e.singleEmployee.name,callback:function(t){e.$set(e.singleEmployee,"name",t)},expression:"singleEmployee.name"}})],1),n("sui-form-field",[n("label",[e._v("职位")]),n("sui-input",{attrs:{placeholder:"职位",disabled:e.disabled},model:{value:e.singleEmployee.job,callback:function(t){e.$set(e.singleEmployee,"job",t)},expression:"singleEmployee.job"}})],1)],1),n("sui-form-fields",[n("sui-form-field",[n("label",[e._v("级别")]),n("sui-input",{attrs:{placeholder:"级别",disabled:e.disabled},model:{value:e.singleEmployee.level,callback:function(t){e.$set(e.singleEmployee,"level",t)},expression:"singleEmployee.level"}})],1)],1)],1)],1)},s=[],r={name:"employee-form",data:function(){return{disabled:!1,singleEmployee:{name:"",job:"",level:""}}},methods:{}},d=r,c=n("2877"),u=Object(c["a"])(d,l,s,!1,null,null,null),g=u.exports,f=n("c3d0"),m=n("3568"),p=n("127e"),h=[{name:"name",title:"名称",width:"20%",sortField:"name",titleClass:"center aligned",dataClass:"center aligned"},{name:"job",title:"职位",width:"20%",sortField:"job",titleClass:"center aligned",dataClass:"center aligned"},{name:"level",sortField:"level",title:"级别",width:"15%",titleClass:"center aligned",dataClass:"center aligned"},{name:"action",title:"操作",titleClass:"center aligned",dataClass:"center aligned",width:"15%"}],b=n("0b2f"),v=n("0094"),k={name:"MyVuetable",components:{"dialog-bar":i["a"],Vuetable:f["a"],VuetablePagination:m["a"],VuetablePaginationInfo:p["a"],EmployeeForm:g},data:function(){return{sendVal:!1,modelTitle:"",modalMode:"create",open:!1,tokenMessage:{tokenExpired:!1},deleteTarget:"",loading:!0,localData:[],fields:h,sortOrder:[{field:"email",direction:"asc"}]}},methods:{formatJson:function(e,t){return t.map((function(t){return e.map((function(e){if("timestamp"!==e)return t[e]}))}))},clickConfirmDelete:function(){var e=this;this.loading=!0,Object(v["l"])(this.deleteTarget).then((function(t){e.refreshUnits(),console.log(t)}))},viewSomeThing:function(e,t){this.$refs.formComponent.singleEmployee=e,"modify"==t?(this.$refs.formComponent.disabled=!1,this.modelTitle="修改员工",this.modalMode="edit",this.open=!this.open):"check"==t?(this.$refs.formComponent.disabled=!0,this.modalMode="check",this.modelTitle="查看员工资料",this.open=!this.open):console.log("delete")},exportToExcel:function(){var e=["id","name","job","level"],t=this.formatJson(e,this.localData.data);Object(b["a"])({header:e,data:t,filename:"excel-list",autoWidth:!0,bookType:"xlsx"})},deleteRoom:function(e){this.sendVal=!0,this.deleteTarget={text:"是否要删除员工("+e.name+")?",id:e.id}},refreshUnits:function(){var e=this;this.loading=!0,Object(v["u"])().then((function(t){console.log(t),e.loading=!1,e.localData={total:16,per_page:5,current_page:1,last_page:4,next_page_url:"data.data.data?page=2",prev_page_url:null,from:1,to:5,data:t.data.data}}))},createRoomModel:function(){this.modelTitle="创建员工",this.modalMode="create",this.open=!0,this.$refs.formComponent.singleEmployee={name:"",job:"",level:""}},toggle:function(){var e=this;this.open=!this.open,this.loading=!0;var t=this.$refs.formComponent.singleEmployee;"create"==this.modalMode?Object(v["e"])(t).then((function(t){console.log(t),e.loading=!1,e.refreshUnits()})):"edit"==this.modalMode&&Object(v["D"])(t).then((function(t){console.log(t),e.loading=!1}))},openRoom:function(e){console.log(e)},submit:function(){console.log(this.filterString)},onPaginationData:function(e){this.$refs.pagination.setPaginationData(e),this.$refs.paginationInfo.setPaginationData(e)},onChangePage:function(e){this.$refs.vuetable.changePage(e)},closeModal:function(){this.open=!1}},created:function(){var e=this;Object(v["u"])().then((function(t){if(2==t.code)return e.tokenMessage.tokenExpired=!0,e.tokenMessage.text="token过期了",e.tokenMessage.dangerText="重新登陆",void(e.tokenMessage.content="请重新登陆");1!=t.token&&(e.loading=!1,e.localData={total:16,per_page:5,current_page:1,last_page:4,next_page_url:"data.data.data?page=2",prev_page_url:null,from:1,to:5,data:t.data.data})}))}},x=k,_=(n("6910"),Object(c["a"])(x,a,o,!1,null,null,null));t["default"]=_.exports},6910:function(e,t,n){"use strict";var a=n("f607"),o=n.n(a);o.a},f607:function(e,t,n){}}]);
//# sourceMappingURL=chunk-597b01d7.79bad6cc.js.map